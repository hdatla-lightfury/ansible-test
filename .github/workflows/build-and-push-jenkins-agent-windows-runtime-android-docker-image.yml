name: Build and Push Jenkins Docker Images to ECR

on:
  push:
    branches:
      - main
      - staging
    paths:
      - 'images/docker/jenkins/agent/windows-runtime/android/**'
      - 'images/docker/jenkins/agent/windows-runtime/docker_layers/**'
jobs:
  build-agent-windows-runtime:
    uses: ./.github/workflows/reusable-build-and-push-docker-images.yml
    with:
      dockerfile_dir: 'images/docker/jenkins/agent/windows-runtime/android'
      image_config_file: 'images/docker/jenkins/agent/windows-runtime/android/image-config.yml'
      ansible_playbook_dir: 'configuration/ansible/playbooks/docker/jenkins/'
      ansible_playbook_file_name: 'build-push-docker-images.yml'
      ecr_repo: 'jenkins/agent/android'
      env_file_contents: ""  # No .env file needed for agent
